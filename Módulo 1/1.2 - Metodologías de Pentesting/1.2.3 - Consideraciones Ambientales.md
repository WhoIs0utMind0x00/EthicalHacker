# 1.2.3 - Consideraciones Ambientales
Por supuesto, hay varios tipos diferentes de pruebas de penetración. A menudo, se combinan en el alcance general de una prueba de penetración; sin embargo, también se pueden realizar como pruebas individuales.

La siguiente es una lista de algunas de las consideraciones ambientales más comunes para los tipos de pruebas de penetración en la actualidad:<br>

### Pruebas de Infraestructura de Red
Las pruebas de la infraestructura de la red pueden significar algunas cosas. A los efectos de este curso, decimos que se centra en evaluar la postura de seguridad de la infraestructura de red real y cómo puede ayudar a defenderse de los ataques. Esto a menudo incluye los conmutadores, enrutador, cortafuegos y recursos de soporte, como servidores de autenticación, autorización y contabilidad (AAA) e IPS. A veces, una prueba de penetración en la infraestructura inalámbrica puede incluirse en el alcance de una prueba de infraestructura de red. Sin embargo, se realizarían tipos adicionales de pruebas más allá de una evaluación de red cableada. Por ejemplo, un evaluador de seguridad inalámbrica intentaría ingresar a una red a través de la red inalámbrica eludiendo los mecanismos de seguridad o interrumpiendo los métodos criptográficos utilizados para proteger el tráfico. Probar la infraestructura inalámbrica ayuda a una organización a determinar las debilidades en la implementación inalámbrica y la exposición. A menudo incluye un mapa de calor detallado del desempeño de la señal.
#
### Pruebas Basadas en Aplicaciones
Este tipo de prueba de penetración se centra en probar las debilidades de seguridad en las aplicaciones empresariales. Estas debilidades pueden incluir, entre otras, configuraciones incorrectas, problemas de validación de entrada, problemas de inyección y fallas lógicas. Debido a que una aplicación web generalmente se basa en un servidor web con una base de datos back-end, el alcance de la prueba normalmente también incluye la base de datos. Sin embargo, se centra en obtener acceso a esa base de datos de soporte a través del compromiso de la aplicación web. Un gran recurso que mencionamos varias veces en este curso es Proyecto de Seguridad de Aplicaciones Web Abiertas o OWASP por sus siglas en inglés (Open Web Application Security Project).
#
### Pruebas de Penetración en la Nube
Los proveedores de servicios en la nube (CSP), como Azure, Amazon Web Services (AWS) y Google Cloud Platform (GCP), no tienen más remedio que tomarse muy en serio sus responsabilidades de seguridad y cumplimiento. Por ejemplo, Amazon creó el modelo de responsabilidad compartida para describir las responsabilidades de los clientes de AWS y las responsabilidades de Amazon en detalle (consulte *https://aws.amazon.com/es/compliance/shared-responsibility-model/?nc1=h_ls*).

La responsabilidad de la seguridad en la nube depende del tipo de modelo de nube (software como servicio [SaaS], plataforma como servicio [PaaS] o infraestructura como servicio [IaaS]). Por ejemplo, con IaaS, el cliente (consumidor de la nube) es responsable de los datos, las aplicaciones, el tiempo de ejecución, el software intermedio, las máquinas virtuales (VM), los contenedores y los sistemas operativos en las VM. Independientemente del modelo utilizado, la seguridad en la nube es responsabilidad tanto del cliente como del proveedor de la nube. Estos detalles deben resolverse antes de firmar un contrato de computación en la nube. Estos contratos varían según los requisitos de seguridad del cliente. Las consideraciones incluyen la recuperación tras desastres, los acuerdos de nivel de servicio (SLA), la integridad de los datos y el cifrado. Por ejemplo, ¿el cifrado se proporciona de extremo a extremo o solo en el proveedor de la nube? Además, ¿quién administra las claves de cifrado: el CSP o el cliente?

En general, debe asegurarse de que el CSP tenga implementadas las mismas capas de seguridad (lógica, física y administrativa) que usted tendría para los servicios que controla. Al realizar pruebas de penetración en la nube, debe comprender qué puede hacer y qué no. La mayoría de los CSP tienen pautas detalladas sobre cómo realizar evaluaciones de seguridad y pruebas de penetración en la nube. En cualquier caso, existen muchas amenazas potenciales cuando las organizaciones migran a un modelo en la nube. Por ejemplo, aunque sus datos estén en la nube, deben residir en una ubicación física en algún lugar. Su proveedor de la nube debe acordar por escrito proporcionar el nivel de seguridad requerido para sus clientes. A modo de ejemplo, el siguiente enlace incluye la política de soporte al cliente de AWS para pruebas de penetración: _https://aws.amazon.com/security/penetration-testing_.

<hr>

__NOTA__: Muchos evaluadores de penetración consideran que el aspecto físico de las pruebas es el más divertido porque, básicamente, se les paga para irrumpir en las instalaciones de un objetivo. Este tipo de prueba puede ayudar a exponer cualquier debilidad en el perímetro físico, así como los mecanismos de seguridad implementados, como protecciones, puertas y vallas. El resultado debe ser una evaluación de los controles de seguridad físicos externos. La mayoría de los ataques actuales comienzan con algún tipo de ingeniería social. Puede ser una llamada telefónica, un correo electrónico, un sitio web, un mensaje SMS, etc. Es importante probar cómo manejan sus empleados este tipo de situaciones. Este tipo de prueba a menudo se omite del alcance de un proyecto de prueba de penetración principalmente porque implica principalmente probar personas en lugar de la tecnología. En la mayoría de los casos, la administración no está de acuerdo con este tipo de enfoque. Sin embargo, es importante obtener una visión del mundo real de los últimos métodos de ataque. El resultado de una prueba de ingeniería social debe ser la evaluación del programa de concientización sobre la seguridad para que pueda mejorarlo. No debe ser para identificar a las personas que no pasaron la prueba. Una de las herramientas de las que hablaremos más en un módulo posterior es el kit de herramientas de ingeniería social (SET), creado por Dave Kennedy. Esta es una gran herramienta para realizar campañas de pruebas de ingeniería social.<br>

__CONSEJO__: Los programas de recompensa por errores permiten que los investigadores de seguridad y los evaluadores de penetración obtengan reconocimiento (y, a menudo, una compensación monetaria) por encontrar vulnerabilidades en sitios web, aplicaciones o cualquier otro tipo de sistema. Empresas como Microsoft, Apple y Cisco, e incluso instituciones gubernamentales como el Departamento de Defensa (DoD) de los Estados Unidos, utilizan programas de recompensa por errores para recompensar a los profesionales de seguridad cuando encuentran vulnerabilidades en sus sistemas. Muchas empresas de seguridad, como HackerOne, Bugcrowd, Intigriti y SynAck, ofrecen plataformas para que las empresas y los profesionales de seguridad participen en programas de recompensas por errores. Estos programas son diferentes de las pruebas de penetración tradicionales, pero tienen un objetivo similar: encontrar vulnerabilidades de seguridad para permitir que la organización las corrija antes de que los atacantes maliciosos puedan aprovecharlas. Existen diferentes recursos y consejos sobre recompensas por errores en l siguiente repositorio de GitHub: _https://github.com/The-Art-of-Hacking/h4cker/tree/master/bug-bounties_.<br>

Al hablar de métodos de prueba de penetración, es probable que escuche los términos entorno desconocido (anteriormente conocido como caja negra), entorno conocido (anteriormente conocido como caja blanca) y entorno parcialmente conocido (anteriormente conocida como caja gris). Estos términos se utilizan para describir la perspectiva desde la que se realizan las pruebas, así como la cantidad de información que se proporciona al evaluador:<br>

### Prueba de Entorno Desconocido
En una prueba de penetración en un entorno desconocido, al evaluador generalmente se le proporciona solo una cantidad muy limitada de información. Por ejemplo, al evaluador se le pueden proporcionar solo los nombres de dominio y las direcciones IP que están dentro del alcance de un objetivo en particular. La idea de este tipo de limitación es que el evaluador comience con la perspectiva que podría tener un atacante externo. Por lo general, un atacante primero determinaría un objetivo y luego comenzaría a recopilar información sobre el objetivo, utilizando información pública, y obtendría cada vez más información para usar en los ataques. El evaluador no tendría conocimientos previos de la organización y la infraestructura del objetivo. Otro aspecto de las pruebas en entornos desconocidos es que, a veces, es posible que el personal de soporte de la red del objetivo no reciba información sobre cuándo se realizará exactamente la prueba. Esto también permite que se realice un ejercicio de defensa y elimina el problema de que un objetivo se prepare para la prueba y no ofrezca una visión del mundo real de cómo se ve realmente la postura de seguridad.
#
### Prueba de Entorno Conocido
En una prueba de penetración de entorno conocido, el evaluador comienza con una cantidad significativa de información sobre la organización y su infraestructura. El evaluador normalmente recibiría cosas como diagramas de red, direcciones IP, configuraciones y un conjunto de credenciales de usuario. Si el alcance incluye una evaluación de la aplicación, es posible que al evaluador también se le proporcione el código fuente de la aplicación de destino. La idea de este tipo de pruebas es identificar tantos agujeros de seguridad como sea posible. En una prueba de entorno desconocido, el alcance puede ser solo identificar un camino a la organización y detenerse allí. Con las pruebas de entorno conocido, el alcance suele ser mucho más amplio e incluye la auditoría de la configuración de la red interna y el análisis de las computadoras de escritorio en busca de defectos. El tiempo y el dinero suelen ser factores que deciden qué tipo de prueba de penetración se debe completar. Si una empresa tiene inquietudes específicas sobre una aplicación, un servidor o un segmento de la infraestructura, puede proporcionar información sobre ese objetivo específico para disminuir el alcance y la cantidad de tiempo dedicado a la prueba, pero aún así descubrir los resultados deseados. Con la sofisticación y las capacidades de los adversarios actuales, es probable que la mayoría de las redes se vean comprometidas en algún momento, y un enfoque de caja blanca no es una mala opción.
#
### Prueba de Entorno Parcialmente Conocido
Una prueba de penetración de entorno parcialmente conocido es un enfoque híbrido entre las pruebas de entorno desconocido y conocido. En las pruebas de entorno parcialmente conocido, es posible que se proporcionen credenciales a los evaluadores, pero no documentación completa de la infraestructura de la red. Esto permitiría a los evaluadores seguir proporcionando resultados de sus pruebas desde la perspectiva del punto de vista de un atacante externo. Teniendo en cuenta el hecho de que la mayoría de los riesgos comienzan en el cliente y se abren camino en toda la red, un buen enfoque sería un alcance en el que los evaluadores comiencen en el interior de la red y tengan acceso a una máquina cliente. Luego, podrían girar por toda la red para determinar cuál sería el impacto de un compromiso.