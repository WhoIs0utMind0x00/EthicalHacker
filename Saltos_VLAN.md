# Saltos de VLAN
Una forma de identificar una LAN es decir que todos los dispositivos en la misma LAN tienen una dirección IP de capa 3 común y que también están ubicados en el mismo dominio de difusión de capa 2. Una LAN virutal (VLAN) es otro nombre para un dominio de difusión de capa 2. Una VLAN está controlada por un conmutador. El conmutador también controla qué puertos están asociados con qué VLAN.<br>
_Descripción de las VLAN_<br>
Si los conmutadores están en su configuración predeterminada, todos los puertos se asignan de manera predeterminada a la VLAN 1, lo que significa que todos los dispositivos, incluidos los dos usuarios y el enrutador, están en el mismo dominio de difusión o VLAN.

<img src="Imagenes/saltos_vlan.jpeg" width="35%" height="35%" style="border-radius:10px;"><br>

A medida que comience a agregar cientos de usuarios, es posible que desee separar grupos de usuarios en subredes individuales y VLAN individuales asociadas. Para ello, asigne los puertos del conmutador a la VLAN y, luego, cualquier dispositivo que se conecte a ese puerto de conmutador específico será miembro de esa VLAN. Con suerte, todos los dispositivos que se conectan a los puertos del conmutador asignados a una VLAN determinada también tienen una dirección de red IP común configurada para que puedan comunicarse con otros dispositivos en la misma VLAN. A menudo el Protocolo de configuración dinámica de host (DHCP) se utiliza para asignar direcciones IP de un rango de subred común a los dispositivos en una VLAN determinada.<br>
Un problema de tener dos usuarios en la misma VLAN pero no en el mismo conmutador físico es que el conmutador 1 le dice al conmutador 2 que se supone que una trama de difusión o unidifusión es para la VLAN 10. La solución es simple: para las conexiones entre dos conmutadores que contienen puertos en las VLAN que existen entre ambos conmutadores, se pueden configurar puertos troncales específicos en lugar de puertos de acceso. Si los dos puertos de conmutador están configurados como enlaces troncales, incluyen información adicional denominada _etiqueta_ que identifica a qué VLAN pertenece cada trama. 802.1Q es el protocolo estándar para este etiquetado. La información maás importante (para está discusión) es está etiqueta es la ID de VLAN.<br>
Actualmente, los dos hosts no pueden comunicarse porque están en VLAN separadas. Los enlaces entre conmutadores se configuran como enlaces troncales. Una trama de difusión enviada desde el host A y recibida por el conmutador 1 reenviaría la trama por el enlace troncal etiquetado como perteneciente a la VLAN 10 al conmutador 2. El conmutador 2 vería la etiqueta, sabríua que era una transmisión asociada con un VLAN 10, eliminaría la etiqueta y reenviaría la transmisión a todas las demás interfaces asociadas con la VLAN 10, incluido el puerto del conmutador que está conectado al host B. Estos dos componentes principales (los puertos de acceso que se asignan a una sola VLAN y los puertos troncales que etiquetan el tráfico para que un conmutador receptor sepa a qué VLAN pertenece una trama) son los bloques de construcción principales para la conmutación de capa 2, donde un VLAN puede extenderse más allá de un solo conmutador.<br>
El host A y el host B se comunican entre sí y pueden comunicarse con otros dispositivos en la misma VLAN, pero no pueden comunicarse con dispositivos fuera de su VLAN local sin la ayuda de una puerta de enlace predeterminada. Un enrutador podría implementarse con dos interfaces físicas: una que se conecta a un puerto de acceso en el conmutador que se ha asignado a la VLAN 10 y otra interfaz física que se conecta a un puerto de acceso diferente que se ha configurado para una VLAN diferente. Con dos interfaces físicas y una dirección IP diferente en cada una, el enrutador podría realizar el enrutamiento entre las dos VLAN.<br>

_**El salto de red de área local virtual (VLAN)**_ es un método para obtener acceso al tráfico en otras VLAN que normalmente no serían accesibles. Hay dos métodos principales de salto de VLAN: suplantación de conmutador y etiquetado doble.<br>
Cuando se realiza un ataque de suplantación de conmutador, se imita un conmutador de enlace troncal enviando la etiqueta de VLAN correspondiente y los protocolos de enlace troncal específicos. Varios procedimientos recomendados pueden ayudar a mitigar los saltos de VLAN y otros ataques de capa 2. Seguir estas mejores prácticas puede ayudar a evitar que un usuario negocie maliciosamente un enlace troncal con un conmutador y luego tenga acceso completo a cada una de las VLAN mediante el uso de software personalizado en la computadora que puede enviar y recibir tramas etiquetadas con dot1q. Un usuario con un enlace troncal establecido podría realizar saltos de VLAN a cualquier VLAN deseada simplemente etiquetando las tramas con la VLAN de su elección. También se pueden usar otros trucos maliciosos, pero forzar el puerto a un puerto de acceso sin negociación elimina este riesgo.<br>

Otro ataque de salto de VLAN 802.1Q es un ataque de salto de VLAN de doble etiquetado. La mayoría de los conmutadores configurados para 802.1Q eliminan solo una etiqueta 802.1Q. Un atacante podría cambiar la trama 802.1Q original para agregar dos etiquetas de VLAN: una etiqueta externa con su propia VLAN y una etiqueta interna oculta de la VLAN de la víctima. Cuando la trama con doble etiqueta llega al conmutador, solo procesa la etiqueta externa de la VLAN a la que pertenece la interfaz de entrada. El conmutador elimina la etiqueta de la VLAN externa y reenvía la trama a todos los puertos que pertenecen a la VLAN nativa. Se reenvía una copia de la trama al enlace troncal para llegar al siguiente conmutador.