# Práctica de Laboratorio - Usar la Guía de Pruebas de Seguridad Web de OWASP

## Objetivos
En esta práctica de laboratorio se cumplirán los siguientes objetivos:<br>
- __Parte 1__: Investigar la Guía de Pruebas de Seguridad Web (WSTG) de OWASP
- __Parte 2__: Escanear un sitio web e investigar las referencias a vulnerabilidades

## Trasfondo / Escenario
La fundación sin fines de lucro Proyecto Abierto de Seguridad de Aplicaciones a Nivel Mundial (Open Worldwide Application Security Project OWASP) desarrolló la Guía de Pruebas de Seguridad Web (WSTG) para probar los problemas de seguridad más comunes de las aplicaciones web. La guía es útil para diversas partes interesadas, como desarrolladores, evaluadores de software, especialistas en seguridad y gerentes de proyectos. La Guía de Pruebas de Seguridad Web de OWASP es una herramienta gratuita que está disponible para organizaciones e individuos.<br>
La guía de pruebas también es una herramienta útil para la piratería ética. Los hackers éticos pueden usar la guía para probar las aplicaciones web en ejecución de sus clientes en busca de vulnerabilidades de seguridad comunes.<br>
En esta práctica de laboratorio, revisará el WSTG y luego escaneará una aplicación web en busca de vulnerabilidades con el proxy de ataque Zed (ZAP) de OWASP. Investigará algunas de las vulnerabilidades que se descubrieron y remitirá una al WSTG.<br>

## Recursos Necesarios
- Máquina Virtual Kali
- Acceso a Internet

## Parte 1: Investigue el WSTG

### Paso 1: Explore el sitio del proyecto del WSTG del OWASP
- Vaya al sitio de la [Guía de Pruebas de Seguridad Web de OWASP](https://owasp.org/www-project-web-security-testing-guide/).
- Revise la información en la página principal

La Guía de Pruebas de Seguridad Web de OWASP está diseñada para guiar las pruebas de seguridad de las aplicaciones web. Describe técnicas, métodos, herramientas y recursos para probar los problemas de seguridad más comunes de las aplicaciones web. Proporciona un marco de mejores prácticas.<br>

### Paso 2: Revise el contenido
- Haga clic y revise el Prefacio de Eoin Keary en la Tabla de Contenido. Según el Sr. Keary, los desarrolladores son inicialmente responsables de la seguridad de las aplicaciones.<br>
- Regrese a la Tabla de Contenido y seleccione Introducción. Aquí, nos dice que en todas las fases del Ciclo de Vida del Desarrollo de Software (SDLC) se deben incluir las pruebas de seguridad (Diseño, Desarrollo, Implementación y Mantenimiento).<br>
- Los factores Personas, Procesos y Tecnología deben probarse en un programa de pruebas eficaz.<br>
- Se presentan cuatro técnicas de pruebas en la introducción de la Guía de Pruebas web de OWASP, las cuales son:<br>
  - __Revisiones e inspecciones manuales__: Revisiones humanas que prueban las implicaciones de seguridad de los tres factores de un programa de pruebas eficaz, generalmente mediante la inspección de la documentación, las políticas de programación segura, los requisitos de seguridad, los diseños arquitectónicos y las entrevistas a los diseñadores y propietarios de sistemas.
  - __Modelado de amenazas__: Es una técnica para ayudar a los diseñadores a pensar en las amenazas que pueden enfrentar en sus sistemas. En cierto sentido, es una evaluación de riesgos para las aplicaciones. Permite la identificación de riesgos potenciales y la implementación para mitigar esos riesgos antes de que se produzcan ataques.
  - __Revisión de código fuente__: Este es el proceso de verificar manualmente el código fuente de las aplicaciones web en busca de prácticas de programación inseguras.
  - __Pruebas de penetración__: Los evaluadores de penetración acceden a las aplicaciones web en ejecución como si fueran usuarios para realizar ataques y explotar las vulnerabilidades. No debe ser la única técnica utilizada al probar la seguridad de las aplicaciones.<br>
- Regrese a la tabla de Contenido y seleccione OWASP Testing Framework
- Según el marco, las actividades de prueba deben llevarse a cabo antes de que comience el desarrollo, durante la definición y el diseño, durante el desarrollo, durante la implementación, durante el mantenimiento y la operación.<br>
- Regrese a la Tabla de Contenido y seleccione Web Application Security Testing, en esta sección, se describen las 12 categorías de pruebas activas, las cuales son:<br>
  - Recopilación de información
  - Pruebas de administración de la configuración e implementación
  - Pruebas de gestión de identidad
  - Pruebas de autenticación
  - Pruebas de autorización
  - Pruebas de gestión de sesiones
  - Pruebas de validación de entradas
  - Gestión de errores
  - Criptografía
  - Pruebas de lógica empresarial
  - Pruebas del lado del cliente
  - Pruebas de API
- Regrese a la Tabla de Contenido y seleccione Reporting. Aquí muestra que el informe final debe estar dirigido a la Dirección Ejecutiva y al Personal Técnico.<br>

## Parte 2: Escanear un sitio web e investigar las referencias a vulnerabilidades
En esta parte de la práctica de laboratorio, realizará un análisis de vulnerabilidades con Zed Attack Proxy (ZAP). Su objetivo es un sitio web intencionalmente vulnerable. Luego utilizará WSTG para obtener más información sobre una vulnerabilidad que descubrió.<br>

### Paso 1: Abra ZAP e inicie un escaneo
- Inicie la VM de Kali. Navegue hasta el menú de Kali. Busque __zap__ e inicie el escáner OWASP Zap.
- Haga clic en el botón de opción superior para mantener la sesión. Esto significa que puede volver a la sesión más tarde.
- Cierre la ventana de diálogo Manage Add-ons.
- En la ventana principal de ZAP, haga clic en `Automated Scan` para iniciar un escaneo.
- En el campo `URL to Attack`, ingrese __172.17.0.2/dvwa__.
- Haga clic en el botón `Attack` para comenzar el escaneo. El análisis tardará menos de 10 minutos en completarse.<br>
Primero, ZAP utiliza un rastreador web (web spider) para explorar la URL e identificar los recursos que están disponibles allí. Luego aplicará análisis de vulnerabilidades a cada recurso.<br>

### Paso 2: Investigue los resultados
- Seleccione la pestaña Alerts si aún no está seleccionada. Cuando finalice el escaneo, serás trasladado automáticamente allí. Aquí se muestran alrededor de 13 alertas devueltas.
-  Busque y haga clic en la alerta __Remote Code Execution - CVE-2012-1823__. El origen de esta vulnerabilidad es una versión desactualizada de PHP. Esta vulnerabilidad se puede explotar inyectando código PHP en una consulta de PHP. Este código se puede ejecutar en la función `exec` de PHP.<br>
-  Desplácese hacia abajo hasta la sección Etiquetas de Alerta de la Vulnerabilidad. Anote la clave y el valor de WSTG. Haga clic en el valor y use las teclas Ctrl + C para copiar la URL en el portapapeles.
-  Abra un navegador y pegue la URL en el campo de URL. Navegue hasta el sitio de WSTG y lea sobre la vulnerabilidad para comprender lo que WSTG ofrece al evaluador de penetración.