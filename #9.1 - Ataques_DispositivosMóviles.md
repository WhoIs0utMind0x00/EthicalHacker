# Atacando Dispositivos Móviles
Los atacantes utilizan varias técnicas para comprometer los dispositivos móviles. Estos son algunos ataques comunes.<br>

## Ingeniería Inversa
El proceso de análisis de la aplicación móvil compilada para extrar información sobre su código fuente podría utilizarse para comprender la arquitectura subyacente de una aplicación móvil y potencialmente manipular el dispositivo móvil. Los atacantes utilizan técnicas de ingeniería inversa para comprometer el sistema operativo del dispositivo móvil (por ejemplo, Android o iOS) y obtener acceso root o realizar jailbreak en los dispositivos móviles.<br>
__NOTA__: OWASP tiene diferentes ejercicios prácticos que lo ayudan a practicar la ingeniería inversa de las aplicaciones de Android e iOS. Consulte *https://github.com/OWASP/owasp-mstg/tree/master/Crackmes*.<br>

## Análisis de Sandbox
Las aplicaciones de iOS y Android están aisladas entre sí a través de entornos de sandbox. Los sandboxes en dispositivos móviles son un mecanismo de control de acceso obligatorio que describe los recursos a los que una aplicación móvil puede acceder y a los que no. Android e iOS ofrecen diferentes opciones de comunicación entre procesos (IPC) para que las aplicaciones móviles se comuniquen con el sistema operativo subyacente. Un atacante podría realizar un análisis detallado de la implementación del sandbox en un dispositivo móvil para eludir potencialmente los mecanismos de control de acceso implementados por Google (Android) o Apple (iOS), así como por los desarrolladores de aplicaciones móviles.<br>

## Envío de correo no deseado
Los mensajes no solicitados son un problema con el correo electrónico, con los mensajes de texto y otras aplicaciones de mensajería móvil. El phishing sigue siendo uno de los ataques más comunes contra usuarios móviles. En un ataque de este tipo, al usuario se le pueden presentar enlaces que pueden redirigir a sitios maliciosos para robar información confidencial o instalar malware.<br>

<hr>

Las siguientes son algunas de las vulnerabilidades más frecuentes que afectan a los dispositivos móviles.<br>

### Almacenamiento inseguro
Una buena práctica es guardar la menor cantidad posible de datos confidenciales en el almacenamiento local permanente de un dispositivo móvil. Sin embargo, al menos algunos datos del usuario deben almacenarse en la mayoría de dispositivos móviles. Tanto Android como iOS proporcionan API de almacenamiento seguro que permiten a los desarrolladores de aplicaciones móviles utilizar el hardware criptográfico disponible en la plataforma móvil. Si estos recursos se utilizan correctamente, los datos y archivos confidenciales pueden protegerse mediante un cifrado sólido basado en hardware. Sin embargo, los desarrolladores de aplicaciones móviles a menudo no utilizan estas API de almacenamiento seguro con éxito y un atacante podría aprovechar estas vulnerabilidades. Por ejemplo, el llavero de iOS (keychain) está diseñado para almacenar información confidencial de manera segura, como claves de cifrado y tokens de sesión. Utiliza una base de datos SQLite a la que se puede acceder solo a través de las API de Llaveros. Un atacante podría utilizar el análisis estático o la ingeniería inversa para ver cómo las aplicaciones crean claves y las almacenan en el llavero.<br>
#
### Vulnerabilidades de códigos de acceso e integraciones biométricas
A menudo, los usuarios móviles desbloquean un dispositivo móvil proporcionando un PIN o contraseña válidos o mediante el uso de autenticación biométrica, como el escaneo de huellas dactilares o el reconocimiento facial. Android e iOS ofrecen diferentes métodos para integrar la autenticación local en aplicaciones móviles. Las vulnerabilidades en estas integraciones podrían provocar la exposición de datos confidenciales y el compromiso total del dispositivo móvil. Ataques como el ataque de omisión biométrica de objection se pueden utilizar para omitir la autenticación local en dispositivos iOS y Android. OWASP proporciona orientación sobre como probar la autenticación local de iOS en *https://github.com/OWASP/owasp-mstg/blob/master/Document/0x06f-Testing-Local-Authentication.md*.<br>
#
### Fijación de certificados
Los atacantes utilizan la fijación de certificados para asociar una aplicación móvil con un certificado digital particular de un servidor. El propósito es evitar aceptar certificados firmados por una autoridad de certificación (CA) de confianza. La idea es forzar a la aplicación móvil a almacenar el certificado del servidor o la clave pública y, posteriormente, establecer conexiones solo con el servidor conocido/de confianza (lo que se denomina "fijar" el servidor). El objetivo de la fijación de certificados es reducir la superficie de ataque eliminando la confianza en las CA externas. Ha habido muchos incidentes en los que las CA se han visto comprometidas o engañadas para que emitan certificados a impostores. Los atacantes han intentado eludir la fijación de certificados haciendo jailbreak a dispositivos móviles y utilizando utilidades como [SSL Kill Switch 2](https://github.com/nabla-c0d3/ssl-kill-switch2) o la aplicación Burp Suite Mobile Assistant o mediante parches binarios y reemplazando el certificado digital.<br>
#
### Uso de componentes con vulnerabilidades conocidas
Los atacantes pueden aprovechar las vulnerabilidades conocidas contra el sistema operativo móvil subyacente o las vulnerabilidades de dependencia (es decir, las vulnerabilidades en las dependencias de una aplicación móvil). La fragmentación de parches es uno de los mayores desafíos en las implementaciones basadas en Android. La fragmentación de Android es el término que se aplica a las numerosas versiones de Android que son compatibles o no con diferentes dispositivos móviles. Tenga en cuenta que Android no solo se usa en dispositivos móviles, sino también en entornos de IoT. Algunas plataformas móviles o dispositivos de IoT pueden no admitir una versión de Android que haya abordado vulnerabilidades de seguridad conocidas. Los atacantes pueden aprovechar estos problemas y limitaciones de compatibilidad para aprovechar tales vulnerabilidades.<br>
#
### Ejecución de actividades con permisos de raíz y sobrepaso
Los desarrolladores de aplicaciones deben practicar el concepto de privilegio mínimo. Es decir, no deben permitir que las aplicaciones móviles se ejecuten como root y deben darles solo el acceso que necesitan para realizar sus tareas.<br>
#
### Vulnerabilidades de la lógica empresarial
Un atacante puede utilizar transacciones y flujos legítimos de una aplicación de manera que tenga un comportamiento o un resultado negativo. Los problemas de lógica empresarial más comunes son diferentes de las vulnerabilidades de seguridad típicas en las aplicaciones (como XSS, CSRF o Inyección SQL, por mencionar algunos). Un desafío con las fallas de la lógica empresarial es que, por lo general, no se pueden encontrar mediante escáneres u otras herramientas similares.<br>

<hr>

Existen muchas herramientas utilizadas en las pruebas de penetración. En este punto, veamos algunas de las más utilizadas para realizar investigaciones de seguridad y probar la postura de seguridad de los dispositivos móviles.<br>

### Burp Suite
Además de los proxies y las herramientas de seguridad de aplicaciones web, [Burp Suite](https://portswigger.net/burp) también se puede utilizar para probar aplicaciones móviles y determinar cómo se comunican con los servicios web y las API.<br>
#
### Drozer
[Drozer](https://labs.whitsecure.com/tools/drozer) es una plataforma y marco de pruebas de Android que proporciona acceso a numerosos exploits que pueden usarse para atacar las plataformas de Android.<br>
#
### Needle
[Needle](https://github.com/WithSecureLabs/needle) es un marco de código abierto que se utiliza para probar la seguridad de las aplicaciones de iOS.<br>
#
### Marco de Seguridad Móvil (MobSF)
[MobSF](https://github.com/MobSF/Mobile-Security-Framework-MobSF) es una aplicación móvil y un marco de análisis de malware automatizado.<br>
#
### Postman
[Postman](https://www.postman.com) se utiliza para probar y desarrollar API.<br>
#
### Ettercap
[Ettercap](https://www.ettercap-project.org) es una herramienta que se utiliza para realizar ataques en ruta. Una herramienta alternativa a Ettercap, es [Bettercap](https://www.bettercap.org).
#
### Frida
[Frida](https://frida.re) es una herramienta de instrumentación dinámica para investigadores de seguridad e ingenieros de ingeniería inversa.<br>
#
### Objection
[Objection](https://github.com/sensepost/objection) es una plataforma móvil en tiempo de ejecución y un kit de herramientas de exploración de aplicaciones que utiliza Frida en segundo plano. Puede utilizar Objection para omitir la fijación de certificados, volcar llaveros, realizar análisis de memoria y lanzar otros ataques móviles.<br>
#
### Herramientas del SDK de Android
Puede utilizar las herramientas de [Android Studio](https://developer.android.com/studio) para analizar y obtener información detallada sobre el entorno de Android. Android Studio es el SDK principal de Android proporcionado por Google.<br>
#
### ApkX
[ApkX](https://github.com/b-mueller/apkx) es una herramienta que permite descompilar archivos de paquetes de aplicaciones de Android (APK).<br>
#
### APK Studio
[APK Studio](https://github.com/vaibhavpandeyvpz/apkstudio) es una herramienta que se puede utilizar para realizar ingeniería inversa en aplicaciones de Android.<br>
