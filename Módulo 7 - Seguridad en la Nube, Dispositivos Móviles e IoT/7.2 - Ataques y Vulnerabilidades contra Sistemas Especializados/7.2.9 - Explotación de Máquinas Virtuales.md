# 7.2.9 - Explotando Máquinas Virtuales
Se supone que una máquina virtual (VM) es un sistema completamente aislado. Una VM no debe tener acceso a los recursos y datos de otra VM a menos que esté estrictamente permitido y configurado. En la siguiente imagen, se muestran tres máquinas virtuales que ejecutan diferentes aplicaciones y sistemas operativos.<br>

<img src="<Módulo 6 - Vulnerabilidades Basadas en Aplicaciones/6.1 - Descripción General y Top 10 de OWASP/img/Imagenes/VM.jpeg>" width="75%" height="75%" style="border-radius:10px;"><br>

El hipervisor es la entidad que controla y administra las máquinas virtuales. Existen dos tipos de hipervisores:<br>

- Los __hipervisores de tipo 1__ (también conocidos como __hipervisores nativos__) se ejecutan directamente en el sistema físico (__bare-metal__). Ejemplos de hipervisores de tipo 1 incluyen __VMware ESXI__, __Proxmox Virtual Environment__, __Xen__ y __Microsoft Hyper-V__.
- Los __hipervisores de tipo 2__ (o alojados), se ejecutan sobre otros sistemas operativos. Ejemplos de hipervisores de tipo 2 incluyen __VirtualBox__ y __VMware Player__ o __Workstation__.<br>

Estos sistemas virtuales han sido susceptibles a muchas vulnerabilidades, incluidas las siguientes:<br>
- __Vulnerabilidades de Escape de VM__: Estas vulnerabilidades permiten que un atacante "escape" de la VM y obtenga acceso a otras máquinas virtuales en el sistema o tener acceso al hipervisor. En la siguiente imagen, un atacante encuentra una vulnerabilidad de escape de VM en el hipervisor subyacente y la utiliza para acceder a los datos de otra VM.<br>

<img src="<Módulo 6 - Vulnerabilidades Basadas en Aplicaciones/6.1 - Descripción General y Top 10 de OWASP/img/Imagenes/Esc_VM.jpeg>" width="75%" height="75%" style="border-radius:10px;"><br>

- __Hiperjacking__: El _hiperjacking_ es una vulnerabilidad que podría permitir que un atacante controle el hipervisor. Los ataques de hiperjacking a menudo requieren la instalación de un hipervisor malicioso (o "falso") que pueda administrar todo el entorno virtual. El hipervisor comprometido o falso funciona en modo sigiloso, lo que evita la detección. Los ataques de hiperjacking se pueden lanzar inyectando un hipervisor falso debajo del hipervisor original u obteniendo directamente el control del hipervisor original. También puede lanzar un ataque de hiperjacking ejecutando un hipervisor falso sobre un hipervisor existente.<br>
- __Vulnerabilidades del repositorio de VM__: Los atacantes pueden aprovechar estas vulnerabilidades para comprometer muchos sistemas y aplicaciones. Hay muchos repositorios de VM públicos y privados que los usuarios pueden aprovechar para implementar VM, incluidos diferentes sistemas operativos, herramientas de desarrollo, bases de datos y otras soluciones. Algunos ejemplos son [VMWare Marketplace](https://marketplace.cloud.vmware.com/) y [AWS Marketplace](https://aws.amazon.com/marketplace). Los atacantes han encontrado formas de cargar máquinas virtuales falsas o suplantadas con software malicioso y puertas traseras. Muchas organizaciones implementan estas máquinas virtuales listas para usar, lo que permite al atacante manipular los sistemas, las aplicaciones y los datos del usuario.<br>