<style>
h1 { text-align:center; color: #4172F2; } p { text-align:left; } h2 { text-align: center; font-family:'JetBrains Mono'; color: #74a2dd; }
</style>
# 9.2.2 - Controles Técnicos
Los **_controles técnicos_** utilizan la tecnología para reducir las vulnerabilidades. Los siguientes son ejemplos de controles técnicos que pueden recomendarse como mitigaciones y correcciones de las vulnerabilidades encontradas en una prueba de penetración.<br>

## Fortalecimiento del sistema
El fortalecimiento del sistema implica la aplicación de mejores prácticas de seguridad, parches y otras configuraciones para corregir o mitigar las vulnerabilidades que se encuentrean en los sistemas y las aplicaciones. El proceso de fortalecimiento del sistema incluye el cierre de puertos y servicios abiertos innecesarios, la eliminación de software innecesario y la desactivación de puertos no utilizados.<br>
## Sanitización de entradas de usuario y parametrización de consultas
Se recomienda el uso de las mejores prácticas de validación de entrada (sanitización de la entrada del usuario) para mitigar y prevenir vulnerabilidades tales como secuencias de comandos entre sitios, falsificación de solicitudes entre sitios, inyección SQL, inyección de comandos, entidades externas XML y otras vulnerabilidades. OWASP proporciona varias hojas de referencia y orientación detallada sobre cómo prevenir estas vulnerabilidades; consulte https://cheatsheetseries.owasp.org/cheatsheets/Input_Validation_Cheat_Sheet.html y https://cheatsheetseries.owasp.org/cheatsheets/Query_Parameterization_Cheat_Sheet.html.<br>

## Autenticación Multifactor (MFA)
La autenticación multifactor (MFA) es la autenticación que requiere dos o más factores. La autenticación multicapa requiere que se presenten dos o más factores del mismo tipo. La clasificación de los datos, los requisitos reglamentarios, el impacto del acceso no autorizado y la probabilidad de que se ejerza una amenaza deben tenerse en cuenta al decidir el nivel de autenticación requerido. Cuantos más factores, más sólido será el proceso de autenticación. En respuesta a la inseguridad de las contraseñas, muchas organizaciones han implementado opciones de autenticación multifactor para sus usuarios. Con la autenticación multifactor, las cuentas están protegidas por algo que sabe (contraseña) y algo que tiene (código de verificación único que se le proporciona). Incluso los jugadores han estado protegiendo sus cuentas con MFA durante años.<br>
__CONSEJO__: Veamos esto en la práctica: Jeannette inserta su tarjeta bancaria en un cajero automático e ingresa su PIN. ¿Qué ejemplos de autenticación multifactor ha presentado? Un cajero automático proporciona un buen ejemplo de MFA porque requiere tanto "algo que tiene" (su tarjeta de cajero automático) como "algo que sabe" (su PIN). Otro posible factor en la MFA es “algo que usted es”, que puede basarse en datos biométricos, como huellas dactilares, patrones de la retina y la geometría de la mano. Otro factor más es “estar en algún lugar”, como la autenticación en una red específica en un área geográfica o un límite específicos mediante geocercas o GPS.<br>
## Encriptación de contraseñas
Siempre debe cifrar las contraseñas, los tokens, las credenciales de la API y los datos de autenticación similares.<br>
## Corrección a nivel de proceso
Es importante proteger los procesos del sistema operativo (por ejemplo, Linux, Windows, iOS, Android) y asegurarse de que un atacante no haya creado ni manipulado ningún proceso en el sistema subyacente.<br>
## Administración de parches
La administración de parches es el proceso de distribución, instalación y aplicación de actualizaciones de software. Una política de administración de parches enumera las pautas para la administración adecuada de las vulnerabilidades e incluye fases como probar, implementar y documentar los parches de seguridad aplicados a su organización.<br>
## Rotación de claves
Es importante tener y utilizar un  proceso para retirar una clave de cifrado y reemplazarla generando una nueva clave criptográfica. La rotación de claves a intervalos regulares le permite reducir la superficie de ataque y cumplir con los estándares y el cumplimiento de la industria.<br>
## Administración de certificados
Es importante inscribir, generar, administrar y revocar certificados digitales de manera segura.<br>
## Solución de administración de secretos
Puede aprovechar una serie de herramientas y técnicas para administrar las credenciales de autenticación (secretos). Estos secretos incluyen contraseñas, claves de API y tokens utilizados en aplicaciones, servicios y sistemas especializados. Emplear una buena solución de administración de secretos le permite eliminar credenciales codificadas, aplicar las mejores prácticas de contraseñas (o eliminar contraseñas con otro tipo de autenticación), realizar un monitoreo del uso de credenciales y extender la administración de secretos que ofrecen los proveedores de la nube son __[AWS Secrets Manager](https://aws.amazon.com/secrets-manager)__ y __[Google Cloud Secret Manager](https://cloud.google.com/secret-manager)__.<br>
## Segmentación de la red
Segmentar una red puede implicar el uso de una combinación de tecnologías, como firewalls, VLAN, listas de control de acceso en enrutadores y otras técnicas. Durante décadas, a los servidores se les asignaron subredes y VLAN. Suena bastante simple, ¿verdad? Bueno, introdujo muchas complejidades porque la segmentación y las políticas de las aplicaciones se restringían físicamente a los límites de la VLAN dentro del mismo centro de datos (o incluso en el campus). En los entornos virtuales, el problema se agravó. Hoy en día, las aplicaciones pueden moverse entre servidores para equilibrar las cargas a fin de mejorar el rendimiento o la alta disponibilidad en caso de fallas. También pueden moverse entre diferentes centros de datos e incluso diferentes entornos de nube.<br>

La segmentación tradicional basada en VLAN lo limita a mantener políticas relacionadas con qué aplicación debe comunicarse con qué aplicación (y quién puede acceder a tales aplicaciones) en cortafuegos centralizados. Esto es ineficaz porque la mayor parte del tráfico en los centros de datos ahora es tráfico de “este a oeste” y gran parte de ese tráfico ni siquiera llega al cortafuego tradicional. En entornos virtuales, gran parte del tráfico no sale del servidor físico. Debe aplicar políticas para restringir si la aplicación A necesita o no comunicarse con la aplicación B o qué aplicación debe poder comunicarse con la base de datos. Estas políticas no deben estar limitadas por la VLAN o subred IP a la que pertenece la aplicación ni por si está en el mismo rack o incluso en el mismo centro de datos.

El tráfico de red no debe ir y venir entre las aplicaciones y los cortafuegos centralizados para aplicar políticas entre las VM. La capacidad de aplicar la segmentación de la red en esos entornos se denomina microsegmentación y la microsegmentación se encuentra a nivel de VM o entre contenedores, independientemente de una VLAN o una subred. Las soluciones de microsegmentación deben tener en cuenta las aplicaciones. Esto significa que el proceso de segmentación comienza y finaliza con la propia aplicación. La mayoría de los entornos de microsegmentación aplican un modelo de confianza cero, que dicta que los usuarios no pueden comunicarse con las aplicaciones y las aplicaciones no pueden comunicarse con otras aplicaciones a menos que un conjunto definido de políticas lo permita.