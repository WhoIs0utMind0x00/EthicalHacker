# 9.1.6 - Práctica de Laboratorio: Exploración de Informes de Pruebas de Penetración

## Objetivos
Revise ejemplos de informes de pruebas de penetración y cree su propio formato de informe a partir de ejemplos y notas de pruebas de penetración.
+ Parte 1: Revisar los informes de pruebas de penetración disponibles al público
+ Parte 2: Desarrollar su propio formato de informe
+ Parte 3: Crear su informe de pruebas de penetración

## Trasfondo / Escenario
Al final de una prueba de seguridad, se produce un informe de prueba de penetración que presenta un análisis detallado de los riesgos de seguridad de la organización. El informe cubrirá muchos aspectos de la postura de seguridad de la organización, las vulnerabilidades, las inquietudes de alta y baja prioridad y las correcciones sugeridas. Además, los informes de pruebas de penetración son una parte importante para mantener el cumplimiento normativo. Los informes proporcionan evidencia de que la organización toma medidas para evaluar su infraestructura y la seguridad de los datos confidenciales.<br>
Cuando se trata de crear el informe de pruebas de penetración, la mayoría de los profesionales de pruebas de penetración comienzan con una plantilla de la empresa y luego la personalizan en función del tipo de prueba realizada y el resultado deseado.<br>
En esta práctica de laboratorio, completará un informe a partir de la información recopilada durante un compromiso de prueba de penetración realizado por Protego Security Solutions. El cliente que recibirá el informe es Pixel Paradise Inc., un creador de juegos electrónicos.<br>

## Recursos Necesarios
+ Computadora personal o dispositivo móvil con acceso a Internet

## Parte 1: Revisar los informes de pruebas de penetración disponibles al público
Hay muchas fuentes en Internet para obtener informes gratuitos de pruebas de penetración.
+ Vaya a *https://github.com/santosomar/public-pentesting-reports*.<br>Esto es una muestra de informes de pruebas de penetración públicos.<br>Busque en la web "Ejemplos de informes de pruebas de penetración". Debería encontrar ejemplos adicionales.
+ Seleccione y revise al menos tres informes diferentes. Tome notas que detallen las secciones incluidas en los informes y el tipo de información incluida en cada una.<br>__NOTA__: Intente encontrar informes que contengan resultados completos de pruebas de penetración para una empresa cliente. Los informes sobre la seguridad del software, las tecnologías o los sistemas no son relevantes para nuestras necesidades en esta práctica de laboratorio.<br>

## Parte 2: Desarrollar su propio formato de informe
Hay muchas formas de escribir un informe de prueba de penetración. Como sabe, la mayoría de los informes de pruebas de penetración comparten las mismas secciones clave. En esta parte de la práctica de laboratorio, creará su propio formato de informe de pruebas de penetración mediante la creación de un esquema de las secciones principales del informe. También puede utilizar subtítulos.<br>

### Sección 1: Crear su estructura de informe
+ Revise sus notas de la parte 1 y desarrolle un esquema de las secciones que incluirá en su informe. Su esquema debe constar de los encabezados y subtiítulos principales, según sea necesario.<br>
<hr>

+ Tabla de Contenido
    - Declaración de Confidencialidad
    - Contactos de Compromiso 
    - Resumen Ejecutivo 
        + Enfoque
        + Alcance
        + Resumen de la evaluación y recomendaciones
    - Resumen de evaluación de la prueba de penetración de la red
        + Resumen de hallazgos
    -  Compromiso de la red interna: Guía paso a paso
        + Guía detallada
    - Resumen de mitigación
        + A corto plazo
        + A mediano plazo
        + A largo plazo
    - Detalles técnicos de los hallazgos
    - Apéndices
        + Apéndice A - Determinación de la gravedad
        + Apéndice B - Hosts explotados
        + Apéndice C - Usuarios comprometidos
        + Apéndice D - Cambios/Limpieza del host
        + Apéndice E - Revisión de contraseñas del dominio

| Sección de informes | Información |
|---------------------|-------------|
| Resumen ejecutivo | Resumen de resultados para lectores no técnicos de alto nivel. |
| Enfoque y Alcance | Incluye el acuerdo principal con el cliente sobre qué técnicas se podían usar durante la prueba y hasta dónde podía penetrar |
| Resumen de evaluación | Muestra el resumen de hallazgos durante la prueba |
| Compromiso de la red interna | Muestra una guía detallada paso a paso de lo que se realizó durante la prueba, cómo y hasta dónde se pudo violar la seguridad dentro de la red interna |
| Detalles técnicos | Muestra los detalles de cada vulnerabilidad, cómo se encontró en el sistema y cómo se explotó para encontrar más vulnerabilidades dentro del sistema, de manera detallada para el personal técnico que se va a encargar de las mitigaciones |
| Apéndices | Muestra la gravedad de las vulnerabilidades encontradas, los host comprometidos, usuarios comprometidos, contraseñas descifradas, cambios y limpieza del host
| Sumario | Muestra un sumario con el significado de las palabras técnicas para que todo tipo de público sea capaz de entender el informe |

### Sección 2: Asignar contenido a secciones del informe

#### Recomendaciones
+ __Información General__<br>
  + Contratar gerente de ciberseguridad.
  + Fortalecer los controles de seguridad del administrador: políticas y acuerdos de usuarios, y penalice los dispositivos y páginas no autorizados.
+ __Información Específica__<br>
  + Capacitación anual sobre concientización acerca de seguridad para usuarios.
  + Pruebas periódicas con correos electrónicos de suplantación de identidad (phishing) y otros ataques de Ingeniería Social.
  + Eliminar servidores dudosos y páginas ocultas.
  + Investigar quién modificó las reglas del firewall.
  + Disciplinar al personal involucrado.
  + Establecer y aplicar políticas de Windows con respecto a los recursos compartidos ad hoc.
  + Crear una política de aplicación de contraseñas dentro de los dominios de Windows.
  + Auditoría adicional de AD y SMB para otras vulnerabilidades.
  + Implementar capacitación en codificación segura.
  + Mejorar la validación del formulario de entrada para mitigar los ataques de inyección.
  + Utilizar consultas parametrizadas para segregar las bases de datos back-end de la entrada web.
  + Utilizar GUID aleatorios para los ID de usuario; no exponga la información de ID de usuario en los perfiles de usuario.
  + Cambiar las credenciales predeterminadas y elimine la información del banner del controlador de video.
  + Reemplazar las cámaras con modelos seguros que permitan actualizaciones de software, implemente un programa de actualización.
#### Resumen
+ La empresa ha tenido problemas de crecimiento que han provocado algunas vulnerabilidades graves; esto debe cambiar con nuevos éxitos.
+ La postura de seguridad debe modernizarse para garantizar el éxito continuo y la continuidad del negocio.
+ El nuevo personal implementará un programa de seguridad integral.
#### Propósito y Alcance
+ __Metas__<br>
  + Evaluar la seguridad de la plataforma web.
  + Probar la conciencia de seguridad de los empleados.
  + Evaluación de aplicaciones web: foro de la comunidad y tienda digital.
  + Vulnerabilidad de la red interna por acceso, daño y robo de archivos confidenciales.
  + Posibles vulnerabilidades de IoT u otros dispositivos.
#### Resultados de la prueba
+ Siete miembros del personal hicieron clic en correos electrónicos de phishing.
+ Varios empleados visitaron un sitio web falso con software de registro.
+ Servidor indocumentado descubierto con escaneo de bloques de direcciones; acceso de administrador habilitado con contraseña débil.
+ Se accede a la red interna a través de un servidor web no autorizado, se descubre la propiedad, se configura el firewall para permitir el acceso desde el exterior.
+ Se encontró una página web oculta con una validación de entrada deficiente en el formulario de entrada, vulnerable a la inyección SQL, de comandos y de código. La inyección SQL reveló datos del usuario.
+ El foro de la comunidad utiliza GUID estático para la ID de usuario, se encontraron las ID de usuario incluidas en los perfiles de usuario, se utilizó IDOR para acceder a las cuentas de usuario.
+ La red interna tiene recursos compartidos ad hoc (SMB) desprotegidos o con protección débil; posibilidad de movimiento lateral.
+ El escaneo de Shodan indicó la presencia de un controlador / grabador de video de vigilancia interconectado. El banner mostraba información sobre el modelo y la versión de software. Las credenciales predeterminadas proporcionaron acceso, el software del modelo de la cámara no se puede actualizar.
#### Procesos y Procedimientos
+ Personal probado con correos electrónicos de phising y sitios web duplicados: nuestro honeypot ejecutó un JavaScript de registro para registrar las visitas.
+ Impresión de DNS de dominios web, escaneo de bloques de direcciones para identificar otros servidores, escaneos con GVM, OpenVas, Nikto y ZAP.
+ Red interna escaneada desde el acceso no autorizado con Nmap, BloodHound (AD), enum4linux y scripts SMB de Nmap. smbclient está siendo utilizado para transferir archivos.
+ Aplicaciones web escaneadas con escáneres de vulnerabilidades, pruebas manuales de entradas para vulnerabilidades de inyección.
+ Shodan para identificar dispositivos conectados a Internet, red interna escaneada con Nmap para identificar otros dispositivos conectados.<br>
