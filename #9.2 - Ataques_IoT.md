# Atacando Dispositivos de Internet de las Cosas (IoT)
IoT es un término increíblemente amplio que se puede aplicar en dispositivos personales, sistemas de control industrial (ICS), transporte, y muchas otras empresas e industrias. El diseño y la protección de los sistemas IoT (incluidos el **_control de supervisión y la adquisición de datos (SCADA)_**, **_Internet Industrial de las cosas_**) e ICS implica mucha complejidad. Por ejemplo, las soluciones de IoT tienen requisitos de integración desafiantes y el crecimiento de IoT se está expandiendo más allá de la capacidad de soporte de las partes interesadas de TI tradicionales (en términos de escalabilidad y las habilidades requeridas). La administración y organización de sistemas de IoT presenta una complejidad adicional debido a la disparidad de hardware y software, el uso de tecnologías heredadas y, a menudo, múltiples proveedores e integradores. Las plataformas de IoT deben integrar una amplia gama de dispositivos de IoT perimetrales con diferentes restricciones de dispositivos y deben integrarse en las aplicaciones empresariales de back-end. Además, no hay una solución única en el mercado actual que se pueda implementar en todos los escenarios de IoT.<br>
El mercado de IoT es extremadamente grande e incluye múltiples ofertas de plataformas de nuevas empresas y proveedores muy grandes. En muchos casos, los entornos de IoT abarcan una variedad de componentes que incluyen sensores, puertas de enlace, conectividad de red, aplicaciones e infraestructura en la nube. La desafortunada realidad es que la mayoría de los esfuerzos de seguridad de IoT actuales se centran solo en algunos elementos de todo el sistema. Una plataforma de IoT segura debe proporcionar la infraestructura completa de extremo a extremo para crear una solución de IoT, incluidos el software, la administración y la seguridad para recopilar, transformar, transportar y entregar datos de manera eficaz para proporcionar valor comercial. Por supuesto, es más fácil decirlo que hacerlo.<br>

## Análisis de Protocolos de IoT
El análisis de los protocolos de IoT es importante para tareas como el reconocimiento y la explotación. Por otro lado, en el mundo de IoT, con frecuencia encontrará protocolos de red personalizados, patentados o nuevos. Algunos de los protocolos de red más comunes para las implementaciones de IoT incluyen los siguientes:<br>
- Wi-Fi
- Bluetooth y Bluetooth de Baja Energía (BLE)
- ZigBee
- Z-Wave
- LoraWAN
- Insteon
- Modbus
- Siemens s7comm (Comunicación s7)<br>

Por ejemplo, **_Bluetooth de Baja Energía (BLE)_** se utiliza en dispositivos domésticos de IoT y equipos médicos, industriales y gubernamentales. Puede analizar protocolos como BLE mediante el uso de antenas y equipos especializados, como [Ubertooth One](https://greatscottgadgets.com/ubertoothone/). BLE implica un proceso de tres fases para establecer una conexión:<br>

__Fase 1.__ Intercambio de funciones de emparejamiento<br>
__Fase 2.__ Generación de claves a corto plazo<br>
__Fase 3.__ Distribución de claves específicas del transporte<br>

BLE implementa varias funciones criptográficas. Admite AES para el intercambio de cifrado y distribución de claves para compartir diferentes claves entre los dispositivos habilitados para BLE. Sin embargo, muchos dispositivos que admiten BLE ni siquiera implementan el cifrado de capa BLE. Además, las aplicaciones móviles no pueden controlar el emparejamiento, debido a que se realiza a nivel del sistema operativo. Los atacantes pueden escanear dispositivos BLE o escuchar anuncios de BLE y aprovechar estas configuraciones incorrectas. Luego pueden anunciar dispositivos BLE clonados/falsos y realizar ataques en ruta (anteriormente conocidos como Man-in-the-Middle).<br>
En algunos casos, los protocolos personalizados o exclusivos de IoT pueden ser difíciles. Incluso si puede capturar el tráfico de red, los analizadores de paquetes como Wireshark a menudo no pueden identificar lo que ha encontrado. A veces, necesita escribir nuevas herramientas para comunicarse con los dispositivos de IoT.<br>
__CONSEJO__: Se pueden usar herramientas como [GATTacker](https://github.com/securing/gattacker) para realizar ataques en ruta en implementaciones de BLE. También [BtleJuice](https://github.com/DigitalSecurity/BtleJuice) que es un marco para realizar la intercepción y manipulación del tráfico de BLE.<br>

## Consideraciones Especiales sobre la Seguridad en IoT
Hay algunas consideraciones especiales a tener en cuenta al intentar proteger las implementaciones de IoT.<br>

### Entorno Frágil
Muchos dispositivos de IoT (incluidos sensores y puertas de enlace) tienen recursos informáticos limitados. Debido a esta falta de recursos, es posible que algunas funciones de seguridad, incluido el cifrado, ni siquiera sean compatibles con los dispositivos de IoT.<br>
#
### Preocupaciones de Disponibilidad
Los ataques de Denegación de Servicio (DoS) contra sistemas de IoT son una preocupación importante.<br>
#
### Corrupción de Datos
Los protocolos de IoT a menudo son susceptibles a vulnerabilidades de validación de entrada, así como a problemas de corrupción de datos.<br>
#
### Exfiltración de Datos
Los dispositivos de IoT pueden ser manipulados y utilizados por un atacante para la exfiltración de datos confidenciales.<br>

## Vulnerabilidades Comunes de IoT
Las siguientes son algunas de las vulnerabilidades de seguridad más comunes que afectan las implementaciones de IoT.<br>

### Valores Predeterminados
Las credenciales predeterminadas y las configuraciones predeterminadas a menudo son preocupaciones con los dispositivos de IoT. Por ejemplo, si realiza una búsqueda en [Shodan](shodan.io) para dispositivos de IoT (o hace clic en la sección Explorar), encontrará cientos de dispositivos de IoT con credenciales predeterminadas y configuraciones inseguras expuestas en Internet.<br>
#
### Comunicación de Texto sin Formato y Fuga de Datos
Como se mencionó anteriormente, algunos dispositivos de IoT no admiten el cifrado. Incluso si se admite el cifrado, muchos dispositivos de IoT no implementan comunicaciones cifradas y un atacante podría robar información confidencial fácilmente. La fuga de información confidencial siempre es una preocupación con los dispositivos de IoT.<br>
#
### Configuraciones Codificadas de Forma Fija
A menudo, los proveedores de IoT venden sus productos con configuraciones o credenciales no seguras (incluidas contraseñas, tokens, claves de cifrado y más).<br>
#
### Firmware/Hardware Desactualizado y el Uso de Componentes Inseguros u Obsoletos
Muchas organizaciones continúan ejecutando software y hardware obsoletos en sus dispositivos de IoT. En algunos casos, algunos de estos dispositivos nunca se actualizan. Piense en un dispositivo de IoT que controla diferentes operaciones en el sistema de una plataforma petrolera en el medio del océano. En algunos casos, estos dispositivos nunca se actualizan y, si los actualiza, deberá enviar un equipo para realizar físicamente una actualización de software o hardware. Los dispositivos de IoT a menudo carecen de un mecanismo de actualización seguro.<br>