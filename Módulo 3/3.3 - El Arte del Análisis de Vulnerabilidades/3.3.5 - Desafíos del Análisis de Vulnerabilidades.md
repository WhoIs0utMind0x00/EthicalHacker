# 3.3.5 - Desafíos a tener en cuenta al ejecutar un análisis de vulnerabilidades
Las secciones anteriores han abordado una serie de cosas diferentes que deben tener en cuenta la forma en que realiza el escaneo. Las secciones siguientes brindan más detalles sobre algunas de las cuestiones específicas que debe tener en cuenta al crear una política de escaneo y realizar los escaneos.<br>

## Consideración del mejor momento para realizar un escaneo
El momento en el que se debe ejecutar un escaneo suele ser lo más preocupante cuando se analiza una red de producción. Si está escaneando un dispositivo en un entorno de laboratorio, normalmente no hay mucha preocupación porque el entorno de laboratorio no está siendo utilizado por aplicaciones críticas. Hay algunas razones por las que la ejecución de un escaneo en una red de producción debe realizarse con cuidado. En primer lugar, el tráfico de red generado por un escaneo de vulnerabilidades causará mucho ruido en la red. También puede causar una congestión significativa, especialmente cuando los escaneos atraviesan varios saltos de red.<br>
Otra consideración al elegir un momento para ejecutar un escaneo es el hecho de que muchas de las opciones o complementos que se realizan en un escaneo de vulnerabilidades pueden bloquear el dispositivo objetivo y la infraestructura de la red. Por este motivo, debe asegurarse que, al escanear en una red de producción, lo haga en los momentos que tendrán el menor impacto posible en los usuarios finales y los servidores. La mayoría de las veces, es mejor escanear en las primeras horas del día, cuando nadie está usando la red para fines críticos.<br>

## Determinar qué protocolos están en uso
Una de las primeras cosas que debe saber sobre una red o un dispositivo de destino antes de comenzar a ejecutar un escaneo de vulnerabilidades es qué protocolos se utilizan. Si un dispositivo de destino utiliza protocolos TCP y UDP para los servicios en ejecución, y solo ejecuta un escaneo de vulnerabilidades en los puertos TCP, se perderán las vulnerabilidades que puedan encontrarse en los servicios UDP.<br>

## Topología de la red
La topología de la red siempre debe considerarse cuando se trata del escaneo de vulnerabilidades. Por supuesto, nunca se recomienda escanear a través de una conexión WAN porque afectaría significativamente a cualquiera de los dispositivos a lo largo de la ruta. La regla general al determinar en qué parte de la topología de la red se debe ejecutar un escaneo de vulnerabilidades es que siempre se debe realizar lo más cerca posible del objetivo. Por ejemplo, si está escaneando un servidor de Windows que se encuentra dentro de su subred filtrada (anteriormente conocida como zona desmilitarizada o DMZ), la mejor ubicación para el escáner de vulnerabilidades es junto al servidor en la subred filtrada. Al colocarlo allí, puede eliminar cualquier preocupación sobre el impacto de los dispositivos que atraviesa el tráfico de su escáner. Además del impacto en la infraestructura de la red, otra preocupación es que cualquier dispositivo que atraviese también podría afectar los resultados del escáner.<br>

## Limitaciones del ancho de banda
Tomemos un momento para considerar los efectos de las limitaciones de ancho de banda en el escaneo de vulnerabilidades. Obviamente, cada vez que inunde una red con una gran cantidad de tráfico, se producirá un problema con la cantidad de ancho de banda disponible. Como profesional de pruebas de penetración, debe conocer cómo afecta el ancho de banda de las redes o los sistemas que está escaneando. Específicamente, según la cantidad de ancho de banda que tenga entre el escáner y el objetivo, es posible que deba ajustar la configuración del escáner para adaptarse a situaciones de menor ancho de banda. Si está escaneando un enlace de VPN o WAN que probablemente tenga un ancho de banda limitado, querrá ajustar sus opciones de escaneo para no causar problemas de consumo de ancho de banda. Las configuraciones que deben ajustarse suelen ser las relacionadas con los ataques de tipo desbordamiento y denegación de servicio (DoS).<br>

## Limitación de consultas
Para solucionar el problema de las limitaciones de ancho de banda y el escaneo de vulnerabilidades, a menudo puede ser útil ralentizar el tráfico creado por el escáner. Esto a menudo se denomina limitación de consultas y, por lo general, se puede lograr modificando las opciones de la política de escaneo. Una forma de hacerlo es reducir la cantidad de subprocesos de ataque que se envían al objetivo al mismo tiempo. No hay una regla general específica para la cantidad de subprocesos. Realmente depende de la solidez del objetivo. Algunos objetivos son más frágiles que otros. Otra forma de lograr esto es reducir el alcance de los complementos/ataques que el escáner está buscando. Si sabe que el dispositivo de destino es un servidor Linux, puede deshabilitar los ataques para otros sistemas operativos, como Windows. Aunque los ataques no funcionarán contra el servidor Linux, aún necesita recibir y responder al tráfico. Este tráfico adicional puede causar un cuello de botella en el procesamiento y el consumo de tráfico de red. Limitar la cantidad de solicitudes a las que el objetivo debería responder reduciría el riesgo de causar problemas, como bloquearse en el objetivo, y dar como resultado un escaneo más exitoso.<br>

## Sistemas frágiles/activos no tradicionales
Al utilizar un escáner de vulnerabilidades en su red interna, debe tener en cuenta los dispositivos de la red que podrían no resistir el tráfico que les arroja un escáner de vulnerabilidades. Para estos sistemas, es posible que deba ajustar las opciones de escaneo para reducir el riesgo de bloqueo de los dispositivos o eximir por completo los dispositivos específicos del escaneo. Desafortunadamente, al eximir los dispositivos específicos, se reduce la seguridad general del entorno.<br>
Las impresoras a menudo se consideran "sistemas frágiles". Históricamente, han sido dispositivos que no han podido resistir los intentos de escaneo de vulnerabilidades. Con el aumento de los dispositivos de IoT, hoy en día hay muchos más dispositivos que pueden considerarse frágiles y debe tenerlos en cuenta al planificar el escaneo de vulnerabilidades. La forma típica de abordar los dispositivos frágiles es eximirlos de un escaneo; sin embargo, estos dispositivos pueden suponer un riesgo para el entorno y deben analizarse. Para solucionar este problema, puede "limitar" la frecuencia de escaneo y las opciones utilizadas en la política de escaneo para reducir la probabilidad de que el dispositivo falle.<br>

__CONSEJO__: El tiempo de ejecución de los escaneos también puede estar determinado por la persona o la empresa que lo contrató para realizar la prueba de penetración. En algunos casos, es posible que no se le permita realizar el escaneo durante el horario comercial.<br>

