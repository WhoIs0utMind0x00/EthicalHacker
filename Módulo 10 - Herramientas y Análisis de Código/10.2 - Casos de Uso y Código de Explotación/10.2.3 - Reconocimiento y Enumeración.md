# 10.2.3 - Herramientas Comunes para el Reconocimiento y la Enumeración
El módulo 3, “Recopilación de información e identificación de vulnerabilidades”, abarca algunas de las metodologías y herramientas que se pueden utilizar para el reconocimiento activo y pasivo. En las siguientes secciones, se analizan varias herramientas adicionales que se pueden utilizar para el reconocimiento y la enumeración.<br>

## Herramientas para el reconocimiento pasivo
El reconocimiento pasivo implica intentar recopilar información sobre una víctima mediante el uso de información pública y registros, pero sin utilizar herramientas activas como escáneres o enviar paquetes a la víctima. La industria a menudo se refiere a la información disponible públicamente como inteligencia de código abierto (OSINT).<br>
__NOTA__: OSINT a menudo incluye inteligencia de amenazas y puede usarse tanto para la seguridad ofensiva como defensiva. En esta sección, cuando hablamos de OSINT, hablamos de su uso para la seguridad ofensiva (es decir, pruebas de penetración y hacking ético).<br>
Las siguientes secciones describen algunas de las herramientas de reconocimiento pasivo y OSINT más populares:<br>

### Nslookup, Host y Dig
Puede utilizar herramientas basadas en DNS como `Nslookup`, `Host` y `Dig` para realizar un reconocimiento pasivo.<br>

##### _Uso de Nslookup para el reconocimiento pasivo_

```bash
    ┌──(kali㉿Kali)-[~]
    └─$ nslookup store.h4cker.org
    Server:           172.18.108.34
    Address:          172.18.108.34#53

    Non-authoritative answer:
    store.h4cker.org canonical name = pentestplus.github.io.
    pentestplus.github.io canonical name = sni.github.map.fastly.net.
    Name:      sni.github.map.fastly.net
    Address: 185.199.110.153
    Name:      sni.github.map.fastly.net
    Address: 185.199.109.153
    Name:      sni.github.map.fastly.net
    Address: 185.199.108.153
    Name:      sni.github.map.fastly.net
    Address: 185.199.111.153
```

##### _Uso de Dig para reconocimiento pasivo_

```bash
    ┌──(kali㉿Kali)-[~]
    └─$ dig store.h4cker.org
    ; <<>> DiG 9.11.3-1ubuntu1.1-Ubuntu <<>> store.h4cker.org
    ;; global options: +cmd
    ;; Got answer:
    ;; ->>HEADER<<- opcode: QUERY, status: NOERROR, id: 11540
    ;; flags: qr rd ra; QUERY: 1, ANSWER: 6, AUTHORITY: 0, ADDITIONAL: 1
    ;; OPT PSEUDOSECTION:
    ; EDNS: version: 0, flags:; udp: 65494
    ;; QUESTION SECTION:
    ;store.h4cker.org.                IN     A

    ;; ANSWER SECTION:
    store.h4cker.org.           3600 IN   CNAME    pentestplus.github. io.
    pentestplus.github.io.      3599 IN   CNAME    sni.github.map.
                                                        fastly.net.
    sni.github.map.fastly.net.  3599 IN   A        185.199.111.153
    sni.github.map.fastly.net.  3599 IN   A        185.199.110.153
    sni.github.map.fastly.net.  3599 IN   A        185.199.109.153
    sni.github.map.fastly.net.  3599 IN   A        185.199.108.153

    ;; Query time: 262 msec
    ;; SERVER: 127.0.0.53#53(127.0.0.53)
    ;; WHEN: Mon Sep 03 22:02:37 UTC 2018
    ;; MSG SIZE rcvd: 183
```
#
### Whois
La corporación de Internet para la Asignación de Nombres y Números (ICANN) es la organización que supervisa los dominios de Internet y que creó el Sistema de Notificación de Problemas de Datos Whois (WDPRS). La mayoría de las versiones de Linux, Windows y MacOS admiten la utilidad Whois para consultar la base de datos. También puede utilizar Whois para el reconocimiento. Desafortunadamente, debido al Reglamento General de Protección de Datos (GDPR) de la Unión Europea, la base de datos de Whois se ha restringido para proteger la privacidad.<br>

##### _Uso de Whois para reconocimiento pasivo_

```bash
    ┌──(kali㉿Kali)-[~]
    └─$ whois h4cker.org
    Domain Name: H4CKER.ORG
    Registry Domain ID: D402200000006011258-LROR
    Registrar WHOIS Server: whois.google.com
    Registrar URL: http://domains.google.com
    Updated Date: 2018-06-02T20:31:48Z
    Creation Date: 2018-05-04T03:43:52Z
    Registry Expiry Date: 2028-05-04T03:43:52Z
    Registrar Registration Expiration Date:
    Registrar: Google Inc.
    Registrar IANA ID: 895
    Registrar Abuse Contact Email: registrar-abuse@google.com
    Registrar Abuse Contact Phone: +1.6502530000
    Reseller:
    Domain Status: serverTransferProhibited https://icann.org/
    epp#serverTransferProhibited
    Registrant Organization: Contact Privacy Inc. Customer 1242605855
    Registrant State/Province: ON
    Registrant Country: CA
    Name Server: NS-CLOUD-C1.GOOGLEDOMAINS.COM
    Name Server: NS-CLOUD-C2.GOOGLEDOMAINS.COM
    Name Server: NS-CLOUD-C4.GOOGLEDOMAINS.COM
    Name Server: NS-CLOUD-C3.GOOGLEDOMAINS.COM
    DNSSEC: signedDelegation
    URL of the ICANN Whois Inaccuracy Complaint Form: https://www.icann.
    org/wicf/
    >>> Last update of WHOIS database: 2018-06-23T20:11:03Z <<<

    For more information on Whois status codes, please visit https://
    icann.org/epp

    Access to Public Interest Registry WHOIS information is provided
    to assist persons in determining the contents of a domain name
    registration record in the Public Interest Registry registry database.
    The data in this record is provided by Public Interest Registry for
    informational purposes only, and Public Interest Registry does not
    guarantee its accuracy. This service is intended only for query-
    based access. You agree that you will use this data only for lawful
    purposes and that, under no circumstances will you use this data to
    (a) allow, enable, or otherwise support the transmission by e-mail,
    telephone, or facsimile of mass unsolicited, commercial advertising or
    solicitations to entities other than the data recipient’s own existing
    customers; or (b) enable high volume, automated, electronic processes
    that send queries or data to the systems of Registry Operator, a
    Registrar, or Afilias except as reasonably necessary to register
    domain names or modify existing registrations. All rights reserved.
    Public Interest Registry reserves the right to modify these terms
    at any time. By submitting this query, you agree to abide by this
    policy.

    Please query the RDDS service of the Registrar of Record identified
    in this output for information on how to contact the Registrant,
    Admin, or Tech contact of the queried domain name.
```
#
### FOCA
_Organización de huellas digitales con archivos recopilados (FOCA)_ es una herramienta diseñada para encontrar metadatos e información oculta en documentos. FOCA puede analizar sitios web, así como Microsoft Office, Open Office, PDF y otros documentos. Puede descargar FOCA desde _https://github.com/ElevenPaths/FOCA_. FOCA analiza los archivos extrayendo información _EXIF_ (formato de archivo de imagen intercambiable) de los archivos de gráficos, así como información descubierta a través de la URL de un sitio web escaneado.<br>
#
### Exiftool
__[Exiftool](https://exiftool.org)__ es una herramienta popular para extraer información EXIF de imagenes. EXIF es un estándar que define los formatos de imagenes, sonido y etiquetas auxiliares utilizados por equipos digitales, como cámaras digitales, teléfonos móviles y tabletas.<br>
#
### theHarvester
theHarvester es una herramienta que se puede utilizar para enumerar la información del DNS sobre un nombre de host o una dirección IP determinados. Puede consultar varias fuentes de datos, incluidas Baidu, Google, LinkedIn, servidores públicos Pretty Good Privacy (PGP), Twitter, vhost, Virus Total, ThreatCrowd, CRT.SH, Netcraft y Yahoo.<br>
__NOTA__: El comando `theharvester` está obsoleto. En su lugar, utilice `theHarvester`.<br>
#
### Shodan
__[Shodan](https://www.shodan.io)__ es un motor de búsqueda para dispositivos conectados a Internet. Shodan analiza continuamente Internet y expone sus resultados a los usuarios a través de su sitio web y mediante una API. Los atacantes pueden utilizar esta herramienta para identificar sistemas vulnerables y expuestos en Internet (por ejemplo, dispositivos de IoT mal configurados, dispositivos de infraestructura). Los evaluadores de penetración pueden utilizar esta herramienta para recopilar información sobre sistemas potencialmente vulnerables expuestos a Internet sin analizar activamente a sus víctimas.<br>
#
### Maltego
__[Maltego](https://www.paterva.com)__, que recopila información de registros públicos, es una de las herramientas más populares para el reconocimiento pasivo. Admite numerosas integraciones de terceros. Existen varias versiones de Maltego, incluida una edición comunitaria (que es gratuita) y varias opciones comerciales de cliente y servidor de Maltego. Maltego se puede utilizar para encontrar información sobre empresas, individuos, pandillas, instituciones educativas, grupos de movimientos políticos, grupos religiosos, etc. Maltego organiza las entidades de consulta dentro de la Paleta de entidades y las opciones de búsqueda se denominan "transformaciones".<br>
En Maltego Transform Hub, puede seleccionar productos gratuitos y comerciales que se pueden integrar con Maltego. Por ejemplo, puede integrar Maltego con Shodan o con un sitio web llamado HaveIBeenPwned que le permite consultar si una persona o una dirección de correo electrónico ha sido expuesta como parte de una infracción (y potencialmente recopilar credenciales robadas de dichas infracciones). Se pueden integrar docenas de herramientas y productos comerciales adicionales con Maltego.<br>
#
### Recon-ng
__[Recon-ng](https://github.com/lanmaster53/recon-ng)__ es una herramienta basada en menús que se puede utilizar para automatizar la recopilación de información de OSINT. Recon-ng viene con Kali Linux y varias otras distribuciones de Linux de pruebas de penetración.<br>
Recon-ng viene con docenas de módulos que pueden usarse para realizar búsquedas detalladas de registros públicos, archivos interesantes, registros DNS, etc.<br>
Recon-ng puede consultar varias herramientas de terceros, incluido Shodan, así como Twitter, Instagram, Flickr, YouTube, Google, repositorios de GitHub y muchos otros sitios. Para algunas de esas herramientas y fuentes, debe registrarse y obtener una clave de API. Puede agregar la clave de API mediante el comando de Recon-ng `keys Add`. Para enumerar todas las API disponibles con las que Recon-ng puede interactuar, utilice el comando `keys list`.<br>
El comando `use` le permite usar un módulo de reconocimiento. Después de seleccionar el módulo, puede invocar el comando `show info` para mostrar las opciones y la información del módulo. Luego puede establecer el origen (dominio de destino, dirección IP, dirección de correo electrónico, etc.) con el comando `set` y luego usar el comando `run` para ejecutar la búsqueda automatizada.<br>
#
### Censys
__[Censys](https://censys.io)__, una herramienta desarrollada por investigadores de la Universidad de Michigan, se puede utilizar para el reconocimiento pasivo a fin de encontrar información sobre dispositivos y redes en Internet. Censys ofrece un plan gratuito de acceso a la web y a la API que limita la cantidad de consultas que puede realizar un usuario. También proporciona varios otros planes pagos que permiten soporte premium y consultas adicionales.
<hr>

## Herramientas para el reconocimiento activo
El reconocimiento activo implica la recopilación activa de información sobre una víctima mediante el uso de herramientas como escáneres de puertos y vulnerabilidades.<br>
#
### Nmap y Zenmap
El módulo 3 analiza Nmap en detalle, incluidas las opciones y los tipos de análisis más comunes disponibles en Nmap. La enumeración de hosts es una de las primeras tareas que se deben realizar en el reconocimiento activo. La enumeración de hosts se puede realizar en una red interna y externa (se obtiene de Internet). Cuando se realiza de forma externa, normalmente desea limitar las direcciones IP que está escaneando solo a las que forman parte del alcance de la prueba. Hacerlo reduce las posibilidades de escanear inadvertidamente una dirección IP que no está autorizado a probar.<br>
Al realizar una enumeración de host interna, generalmente se analiza la subred completa o las subredes de las direcciones IP que utiliza el destino.<br>
Zenmap es una herramienta de interfaz de unidad gráfica (GUI) para Nmap. Zenmap proporciona una función que le permite ilustrar la topología de los hosts que encuentra.
#
### Enum4linux
Enum4linux es una gran herramienta para enumerar los recursos compartidos de SMB, las implementaciones vulnerables de Samba y los usuarios correspondientes.<br>
